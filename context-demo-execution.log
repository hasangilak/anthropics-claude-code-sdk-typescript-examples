ğŸ§ª CONTEXT PRESERVATION DEMONSTRATION
============================================================
ğŸ“ No previous session found - starting fresh

ğŸ“‹ This demo will show:
   ğŸ”„ Session continuity across multiple queries
   ğŸ’¾ Automatic context saving and loading
   ğŸ†” Session ID preservation
   ğŸ’° Cost tracking across sessions

ğŸ“Š SESSION CONTEXT SUMMARY
==============================
ğŸ†• No active session context
==============================

ğŸ”µ Running first context-aware query...
ğŸš€ Context-Aware Claude Code SDK Query
==================================================
ğŸ†• SDK configured for new conversation

ğŸ“¤ Sending query with context preservation...
   Context mode: new
   Max turns: 3
ğŸ”§ System initialized with context preservation
ğŸ“¥ Received assistant response...
ğŸ“¥ Received assistant response...

============================================================
ğŸ”§ PERMISSION REQUEST ğŸŸ¢ LOW RISK
============================================================
ğŸ“‹ Create or modify file at: /home/hassan/anthropic-sdk/context-test.txt

ğŸ“Š IMPACT ANALYSIS:
   ğŸ“ Target: /home/hassan/anthropic-sdk/context-test.txt
   ğŸ“„ Content size: 340 characters
   âœ¨ Will create NEW file
   ğŸ“‚ Directory: /home/hassan/anthropic-sdk

ğŸ’¡ RECOMMENDATIONS:
   Review the file path carefully
   Ensure directory is correct
   Check content preview below

ğŸ“„ Content Preview:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1: Hello Hassan!
 2: 
 3: This is a test file for context preservation while testing the Claude SDK. The s...
 4: 
 5: Context preservation is working correctly - I remember that you are Hassan and t...
   ... and 2 more lines
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”§ RAW PARAMETERS:
{
  "file_path": "/home/hassan/anthropic-sdk/context-test.txt",
  "content": "Hello Hassan!\n\nThis is a test file for context preservation while testing the Claude SDK. The system is successfully maintaining context about your identity and the purpose of this test.\n\nContext preservation is working correctly - I remember that you are Hassan and that you're testing the Claude SDK functionality.\n\nCreated on: 2025-08-07"
}
============================================================

â“ Allow "Write"? (y/n/a=allow all/d=deny all Write/i=info): âŒ PERMISSION DENIED: Write
ğŸ“¥ Received assistant response...

ğŸ¯ CONTEXT-AWARE QUERY COMPLETE!
==================================================
â±ï¸  Duration: 15s
ğŸ’° This query cost: $0.03368335
ğŸ”„ Turns: 4
ğŸ“Š Messages: 6
ğŸ†” Session ID: 96734801-8a86-4f53-bcac-010b0cf4ba7b
âœ… Success: true
ğŸ’¾ Session context saved
âœ… First query completed successfully
ğŸ†” Session ID: 96734801-8a86-4f53-bcac-010b0cf4ba7b

ğŸ”µ Running second context-aware query (should remember context)...
ğŸš€ Context-Aware Claude Code SDK Query
==================================================
ğŸ”„ SDK configured to continue previous conversation

ğŸ“¤ Sending query with context preservation...
   Context mode: continue
   Max turns: 3
   âœ… Will continue previous conversation
ğŸ”§ System initialized with context preservation
ğŸ“¥ Received assistant response...
ğŸ“¥ Received assistant response...
ğŸ“¥ Received assistant response...

ğŸ¯ CONTEXT-AWARE QUERY COMPLETE!
==================================================
â±ï¸  Duration: 14s
ğŸ’° This query cost: $0.028566599999999998
ğŸ”„ Turns: 9
ğŸ“Š Messages: 6
ğŸ†” Session ID: 1c64b5e7-636e-4477-86ca-4a793054443b
âœ… Success: true
ğŸ’¾ Session context saved
âœ… Second query completed - context preservation PARTIAL

ğŸ“Š SESSION CONTEXT SUMMARY
==============================
ğŸ†” Session ID: 1c64b5e7-636e-4477-86ca-4a793054443b
ğŸ“… Last interaction: Thu Aug 07 2025 12:10:57 GMT+0200 (Central European Summer Time)
ğŸ’¬ Total messages: 9
ğŸ’° Total cost: $0.062250
ğŸ“ Summary: The file doesn't exist - it wasn't created because the Write operation was denied in my previous att...
==============================

ğŸ’¡ Context preservation features:
   ğŸ“‚ Session data stored in .claude-session-context.json
   ğŸ”„ Use contextMode: "continue" for seamless conversations
   ğŸ“‹ Use contextMode: "resume" with specific session ID
   ğŸ†• Use contextMode: "new" to start fresh
   ğŸ’¾ Automatic cost and message tracking
